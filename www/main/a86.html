<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>3&nbsp;a86: a Little Assembly Language</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="extra.css" title="default"/><link rel="stylesheet" type="text/css" href="fancyverb.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="accessibility.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">CMSC 430:<span class="mywbr"> &nbsp;</span> Design and Implementation of Programming Languages</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right"></td><td><a href="Syllabus.html" class="tocviewlink" data-pltdoc="x">Syllabus</a></td></tr><tr><td align="right"></td><td><a href="Texts.html" class="tocviewlink" data-pltdoc="x">Texts</a></td></tr><tr><td align="right"></td><td><a href="Schedule.html" class="tocviewlink" data-pltdoc="x">Schedule</a></td></tr><tr><td align="right"></td><td><a href="Notes.html" class="tocviewselflink" data-pltdoc="x">Notes</a></td></tr><tr><td align="right"></td><td><a href="Assignments.html" class="tocviewlink" data-pltdoc="x">Assignments</a></td></tr><tr><td align="right"></td><td><a href="Midterms.html" class="tocviewlink" data-pltdoc="x">Midterms</a></td></tr><tr><td align="right"></td><td><a href="Project.html" class="tocviewlink" data-pltdoc="x">Project</a></td></tr><tr><td align="right"></td><td><a href="Software.html" class="tocviewlink" data-pltdoc="x">Software</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td></td><td><a href="Notes.html" class="tocviewlink" data-pltdoc="x">Notes</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Intro.html" class="tocviewlink" data-pltdoc="x">What <span class="emph">is</span> a Compiler?</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="OCaml_to_Racket.html" class="tocviewlink" data-pltdoc="x">From OCaml to Racket</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">a86:<span class="mywbr"> &nbsp;</span> a Little Assembly Language</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Abscond.html" class="tocviewlink" data-pltdoc="x">Abscond:<span class="mywbr"> &nbsp;</span> a language of numbers</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="Blackmail.html" class="tocviewlink" data-pltdoc="x">Blackmail:<span class="mywbr"> &nbsp;</span> incrementing and decrementing</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="Con.html" class="tocviewlink" data-pltdoc="x">Con:<span class="mywbr"> &nbsp;</span> branching with conditionals</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="Dupe.html" class="tocviewlink" data-pltdoc="x">Dupe:<span class="mywbr"> &nbsp;</span> a duplicity of types</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="Dodger.html" class="tocviewlink" data-pltdoc="x">Dodger:<span class="mywbr"> &nbsp;</span> addressing a lack of character</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="Evildoer.html" class="tocviewlink" data-pltdoc="x">Evildoer:<span class="mywbr"> &nbsp;</span> change the world a couple nibbles at a time</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="Extort.html" class="tocviewlink" data-pltdoc="x">Extort:<span class="mywbr"> &nbsp;</span> when errors exist</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="Fraud.html" class="tocviewlink" data-pltdoc="x">Fraud:<span class="mywbr"> &nbsp;</span> local binding, variables, and binary operations</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="Hustle.html" class="tocviewlink" data-pltdoc="x">Hustle:<span class="mywbr"> &nbsp;</span> heaps and lists</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="Hoax.html" class="tocviewlink" data-pltdoc="x">Hoax:<span class="mywbr"> &nbsp;</span> vectors and strings</a></td></tr><tr><td align="right">14&nbsp;</td><td><a href="Iniquity.html" class="tocviewlink" data-pltdoc="x">Iniquity:<span class="mywbr"> &nbsp;</span> function definitions and calls</a></td></tr><tr><td align="right">15&nbsp;</td><td><a href="Jig.html" class="tocviewlink" data-pltdoc="x">Jig:<span class="mywbr"> &nbsp;</span> jumping to tail calls</a></td></tr><tr><td align="right">16&nbsp;</td><td><a href="Knock.html" class="tocviewlink" data-pltdoc="x">Knock:<span class="mywbr"> &nbsp;</span> first-<wbr></wbr>class function (pointers)</a></td></tr><tr><td align="right">17&nbsp;</td><td><a href="Loot.html" class="tocviewlink" data-pltdoc="x">Loot:<span class="mywbr"> &nbsp;</span> lambda the ultimate</a></td></tr><tr><td align="right">18&nbsp;</td><td><a href="Shakedown.html" class="tocviewlink" data-pltdoc="x">Shakedown:<span class="mywbr"> &nbsp;</span> Calling functions C functions</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9658;</a></td><td>3&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">a86:<span class="mywbr"> &nbsp;</span> a Little Assembly Language</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">3.1&nbsp;</td><td><a href="#%28part._a86-.Overview%29" class="tocviewlink" data-pltdoc="x">Overview</a></td></tr><tr><td align="right">3.2&nbsp;</td><td><a href="#%28part._.Giving_x86_a_try%29" class="tocviewlink" data-pltdoc="x">Giving x86 a try</a></td></tr><tr><td align="right">3.3&nbsp;</td><td><a href="#%28part._a86__.Representing_x86_.Code_as_.Data%29" class="tocviewlink" data-pltdoc="x">a86:<span class="mywbr"> &nbsp;</span> Representing x86 Code as Data</a></td></tr><tr><td align="right">3.4&nbsp;</td><td><a href="#%28part._stacks%29" class="tocviewlink" data-pltdoc="x">Stacks:<span class="mywbr"> &nbsp;</span> pushing, popping, calling, returning</a></td></tr><tr><td align="right">3.5&nbsp;</td><td><a href="#%28part._a86_.Reference%29" class="tocviewlink" data-pltdoc="x">a86 Reference</a></td></tr><tr><td align="right">3.6&nbsp;</td><td><a href="#%28part._.Instruction_set%29" class="tocviewlink" data-pltdoc="x">Instruction set</a></td></tr><tr><td align="right">3.7&nbsp;</td><td><a href="#%28part._.From_a86_to_x86%29" class="tocviewlink" data-pltdoc="x">From a86 to x86</a></td></tr><tr><td align="right">3.8&nbsp;</td><td><a href="#%28part._.An_.Interpreter_for_a86%29" class="tocviewlink" data-pltdoc="x">An Interpreter for a86</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">3.1<tt>&nbsp;</tt></span><a href="#%28part._a86-.Overview%29" class="tocsubseclink" data-pltdoc="x">Overview</a></td></tr><tr><td><span class="tocsublinknumber">3.2<tt>&nbsp;</tt></span><a href="#%28part._.Giving_x86_a_try%29" class="tocsubseclink" data-pltdoc="x">Giving x86 a try</a></td></tr><tr><td><span class="tocsublinknumber">3.3<tt>&nbsp;</tt></span><a href="#%28part._a86__.Representing_x86_.Code_as_.Data%29" class="tocsubseclink" data-pltdoc="x">a86:<span class="mywbr"> &nbsp;</span> Representing x86 Code as Data</a></td></tr><tr><td><span class="tocsublinknumber">3.4<tt>&nbsp;</tt></span><a href="#%28part._stacks%29" class="tocsubseclink" data-pltdoc="x">Stacks:<span class="mywbr"> &nbsp;</span> pushing, popping, calling, returning</a></td></tr><tr><td><span class="tocsublinknumber">3.5<tt>&nbsp;</tt></span><a href="#%28part._a86_.Reference%29" class="tocsubseclink" data-pltdoc="x">a86 Reference</a></td></tr><tr><td><span class="tocsublinknumber">3.6<tt>&nbsp;</tt></span><a href="#%28part._.Instruction_set%29" class="tocsubseclink" data-pltdoc="x">Instruction set</a></td></tr><tr><td><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._register~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">register?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._label~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">label?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._instruction~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">instruction?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._offset~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">offset?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._seq%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">seq</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">prog</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._~25%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">%</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._~25~25%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">%%</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._~25~25~25%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">%%%</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Offset%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">Offset</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">Label</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Extern%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">Extern</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Call%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">Call</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">Ret</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">Mov</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Add%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">Add</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Sub%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">Sub</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Cmp%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">Cmp</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Jmp%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">Jmp</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Je%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">Je</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Jne%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">Jne</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Jl%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">Jl</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Jg%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">Jg</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.And%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">And</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Or%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">Or</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Xor%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">Xor</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Sal%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">Sal</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Sar%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">Sar</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Push%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">Push</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Pop%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">Pop</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Lea%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">Lea</span></span></a></td></tr><tr><td><span class="tocsublinknumber">3.7<tt>&nbsp;</tt></span><a href="#%28part._.From_a86_to_x86%29" class="tocsubseclink" data-pltdoc="x">From a86 to x86</a></td></tr><tr><td><a href="#%28def._%28%28lib._a86%2Fprinter..rkt%29._asm-string%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">asm-<wbr></wbr>string</span></span></a></td></tr><tr><td><span class="tocsublinknumber">3.8<tt>&nbsp;</tt></span><a href="#%28part._.An_.Interpreter_for_a86%29" class="tocsubseclink" data-pltdoc="x">An Interpreter for a86</a></td></tr><tr><td><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">asm-<wbr></wbr>interp</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._current-objs%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">current-<wbr></wbr>objs</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%2Fio%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">asm-<wbr></wbr>interp/<span class="mywbr"> &nbsp;</span>io</span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.0</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="OCaml_to_Racket.html" title="backward to &quot;2 From OCaml to Racket&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Notes.html" title="up to &quot;Notes&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Abscond.html" title="forward to &quot;4 Abscond: a language of numbers&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>3<tt>&nbsp;</tt><a name="(part._a86)"></a>a86: a Little Assembly Language</h4><p><span class="emph">You need to let the little things that would ordinarily bore you suddenly thrill you.</span></p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._a86-.Overview%29" class="toclink" data-pltdoc="x">3.1<span class="hspace">&nbsp;</span>Overview</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Giving_x86_a_try%29" class="toclink" data-pltdoc="x">3.2<span class="hspace">&nbsp;</span>Giving x86 a try</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._a86__.Representing_x86_.Code_as_.Data%29" class="toclink" data-pltdoc="x">3.3<span class="hspace">&nbsp;</span>a86: Representing x86 Code as Data</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._stacks%29" class="toclink" data-pltdoc="x">3.4<span class="hspace">&nbsp;</span>Stacks: pushing, popping, calling, returning</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._a86_.Reference%29" class="toclink" data-pltdoc="x">3.5<span class="hspace">&nbsp;</span>a86 Reference</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Instruction_set%29" class="toclink" data-pltdoc="x">3.6<span class="hspace">&nbsp;</span>Instruction set</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.From_a86_to_x86%29" class="toclink" data-pltdoc="x">3.7<span class="hspace">&nbsp;</span>From a86 to x86</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.An_.Interpreter_for_a86%29" class="toclink" data-pltdoc="x">3.8<span class="hspace">&nbsp;</span>An Interpreter for a86</a></p></td></tr></table><h5>3.1<tt>&nbsp;</tt><a name="(part._a86-.Overview)"></a>Overview</h5><p>x86 is an instruction set architecture (ISA), which is a
fancy way of saying a programming language whose interpreter
is implemented in hardware. Really, x86 is a family of
instruction set architectures, and the first member of the
family was 8086, a 16-bit ISA for Intel&rsquo;s 8086 chipset.</p><p>x86 is old. It&rsquo;s older than the professors teaching this
class. But it lives on today in Intel and AMD based
computers in the form x86-64, the 64-bit descendant of the
8086 language.</p><p>Because it&rsquo;s old and because the design of each generation
of x86 has had significant backwards compatability
requirements and because modern processors are sophisticated
pieces of machinery, the x86-64 language is, well,
complicated. For example,
<a href="https://software.intel.com/content/dam/develop/external/us/en/documents-tps/325462-sdm-vol-1-2abcd-3abcd.pdf">Intel&rsquo;s x86 software developer&rsquo;s manual</a> is 5,066 pages
long.
<a href="https://www.amd.com/system/files/TechDocs/40332.pdf">AMD&rsquo;s manual</a> is 3,242 pages.</p><p>x86-64 is going to be used as the target language of our
compiler. We&rsquo;ll build up a translation from a very
high-level language, based on Racket, down to the very
low-level langauge of x86-64.</p><p>However, that doesn&rsquo;t mean we need to digest 8K+ pages of
dense technical manuals. We will only use very small
fraction of the x86-64 instruction set.</p><p>To make our lives easier, we will do what programming
language designers often do, we will abstract the behemoth
of x86-64 to a small, core language (which we call <span style="font-weight: bold">a86</span>). Our compilers will target a86 and compiling from a86
to x86 as the last step in the compiler pipeline will be
dead simple.</p><p>This chapter describes the a86 language.</p><h5>3.2<tt>&nbsp;</tt><a name="(part._.Giving_x86_a_try)"></a>Giving x86 a try</h5><p>Before describing a86, let&rsquo;s take a brief look at x86.</p><p>There are a few different human-readable formats for writing
x86 assembly code, but we&rsquo;ll be using the one supported by
<a href="https://www.nasm.us/">the Netwide Assembler</a> (NASM).</p><p>Here&rsquo;s an example x86 program, written using nasm syntax.
The program has one global label called <span class="stt">entry</span>, which
will be the main entry point for the program. This program
computes the 36th triangular number, which will reside in
register <span class="stt">rax</span> when the code returns.</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>The conventions for label names differ between Mac and
Linux systems.  On MacOS, you need to prefix all label names with an
underscore, while on Linux you do not.  So on a Mac, you would use the
names <span class="stt">_entry</span>, <span class="stt">_tri</span>, and <span class="stt">_done</span>, while on Linux you would
use <span class="stt">entry</span>, <span class="stt">tri</span>, and <span class="stt">done</span>.</p><p>This example is shown using the MacOS naming convention, because that&rsquo;s what operating
system was used when this web page was built.</p></blockquote></blockquote></blockquote><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><a href="code/a86/tri.s"><span class="stt">a86/tri.s</span></a></span></p><blockquote class="Rfilecontent"><p><div class="sourceCode" id="cb1"><pre class="sourceCode nasm"><code class="sourceCode nasm"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>        default rel</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">section</span> .text</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> _entry</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">_entry:</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span> rbx, <span class="dv">36</span>             <span class="co">; the &quot;input&quot;</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co">;;; tri: a recursive function for computing nth</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co">;;; triangular number, where n is given in rbx.</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">_tri:</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>        <span class="kw">cmp</span> rbx, <span class="dv">0</span>              <span class="co">; if rbx = 0, done</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>        <span class="kw">je</span> _done</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>        <span class="kw">push</span> rbx                <span class="co">; save rbx</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>        <span class="kw">sub</span> rbx, <span class="dv">1</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>        <span class="kw">call</span> _tri               <span class="co">; compute tri(rbx-1) in rax</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>        <span class="kw">pop</span> rbx                 <span class="co">; restore rbx</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>        <span class="kw">add</span> rax, rbx            <span class="co">; result is rbx+tri(rbx-1)</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>        <span class="kw">ret</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="fu">_done:</span>                          <span class="co">; jump here for base case</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>        <span class="kw">mov</span> rax, <span class="dv">0</span>              <span class="co">; return 0</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>        <span class="kw">ret</span></span></code></pre></div>
</p></blockquote></blockquote><p>The <span style="font-style: italic">n</span>th triangular number is the sum of the integers
from 0 to <span style="font-style: italic">n</span>, so the <span style="font-style: italic"></span>3<span style="font-style: italic"></span>6<span style="font-style: italic"></span>th triangular number is
<span style="font-style: italic"></span>0<span style="font-style: italic"> + </span>1<span style="font-style: italic"> + </span>2<span style="font-style: italic"> + </span>3<span style="font-style: italic"> + ... + </span>3<span style="font-style: italic"></span>4<span style="font-style: italic"> + </span>3<span style="font-style: italic"></span>5<span style="font-style: italic"> + </span>3<span style="font-style: italic"></span>6<span style="font-style: italic"></span>.</p><p>This code is not intended to be a model of efficient
computation, rather it demonstrates some important x86
instructions and shows how to compute in a recursive style,
even at a low-level.</p><p>Without getting too bogged down in the details, here how the
code works. Instructions execute one after another. There
are a number of registers which can be used to hold values.
This code makes use of the <span class="stt">rax</span> and <span class="stt">rdi</span> register
(and some other registers are implicitly used and altered by
the <span class="stt">call</span>, <span class="stt">push</span>, <span class="stt">pop</span> and <span class="stt">ret</span>
instructions). The lines like <span class="stt">entry:</span>, <span class="stt">tri:</span>, and
<span class="stt">done:</span> are not instructions, but labels &ndash; they are
names for locations in the source code and can be used as
the targets of jumps and calls.</p><p>Suppose we start executing at <span class="stt">entry</span>.</p><ul><li><p><span class="stt">mov rbx, 36</span> sets the <span class="stt">rbx</span> register to 36.</p></li><li><p><span class="stt">cmp rbx 0</span> compares the value in register <span class="stt">rbx</span> to zero. Executing this instruction sets a flag in the
CPU, which affects subsequent &ldquo;conditional&rdquo; instructions.
In this program, the next instruction is a conditional jump.</p></li><li><p><span class="stt">je done</span> either jumps to the instruction
following label <span class="stt">done</span> or proceeds to the next
instruction, based on the state of the comparison flag. The
<span class="stt">je</span> instruction jumps if the comparison was equal, so
control jumps to done if <span class="stt">rbx</span> was 0 in this program. If
not, the next instruction is executed.</p></li><li><p><span class="stt">push rbx</span> uses memory as a stack to save the
value of <span class="stt">rbx</span>. Under the hood this is modifying a
register that holds a pointer to the stack memory location
(register <span class="stt">rsp</span>).</p></li><li><p><span class="stt">sub rbx, 1</span> decrements <span class="stt">rbx</span> by 1.</p></li><li><p><span class="stt">call tri</span> performs something like a function
call; it uses memory as a stack to save the current location
in the code (which is where control should return to after
the function has completed). After saving this return
pointer, it jumps to the label <span class="stt">tri</span>. There aren&rsquo;t really
functions, but this uses the stack to mimic the
call-and-return mechanism of functions.</p></li><li><p><span class="stt">pop rbx</span> uses the stack memory to pop off the top
element and move it into <span class="stt">rbx</span>, adjusting the stack
pointer appropriately.  This has the effect of restoring <span class="stt">rbx</span>
to the value saved earlier by the <span class="stt">push</span>, i.e. before the decrement
and any changes done in the call to <span class="stt">tri</span>.</p></li><li><p><span class="stt">add rax, rbx</span> updates <span class="stt">rax</span> to hold <span class="stt">rax</span>
plus <span class="stt">rbx</span>.</p></li><li><p><span class="stt">ret</span> does a &ldquo;return,&rdquo; i.e. it pops an address
from the stack and jumps to it. In this case, the jump
either returns from to a previous call to <span class="stt">tri</span> or to
original caller of <span class="stt">entry</span>.</p></li><li><p><span class="stt">mov rax, 0</span> this instruction is only reached from
the earlier conditional jump. It sets <span class="stt">rax</span> to 0. This
program computes its result in <span class="stt">rax</span> so this is saying
that when <span class="stt">rbx</span> (the &ldquo;input&rdquo;) is 0, then (the
&ldquo;output&rdquo;) is 0.</p></li><li><p><span class="stt">ret</span> does a &ldquo;return,&rdquo; either to a prior call to
<span class="stt">tri</span> or the caller of <span class="stt">entry</span>.</p></li></ul><p>Despite the lower-level mechanisms, this code computes in a
way similar to a non-tail recursive definition of the
<span class="RktSym">tri</span> function written in Racket:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">tri</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/if.html#%28form._%28%28quote._~23~25kernel%29._if%29%29" class="RktStxLink" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._~3d%29%29" class="RktValLink" data-pltdoc="x">=</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">tri</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._sub1%29%29" class="RktValLink" data-pltdoc="x">sub1</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">tri</span><span class="hspace">&nbsp;</span><span class="RktVal">36</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>As an exercise to check your understanding, try writing a
tail-recursive version of <span class="RktSym">tri</span> and the corresponding
x86 code, which should not need to push anything to the
stack or use the <span class="stt">call</span> instruction.</p></blockquote></blockquote></blockquote><p>We can compile the <span class="stt">tri.s</span> assembly program to an object
file with <span class="stt">nasm</span>:</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>The format argument should be <span class="stt">macho64</span> on
Mac OS and <span class="stt">elf64</span> on Linux.</p></blockquote></blockquote></blockquote><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">shell</span></span></p><blockquote class="Rfilecontent"><p><div class="sourceCode" id="cb1"><pre class="sourceCode fish"><code class="sourceCode fish"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="er">&gt;</span> nasm -f macho64 -o tri.o tri.s</span></code></pre></div>
</p></blockquote></blockquote><p>To run the object file, we will need to link with a small C program
that can call the <span class="stt">entry</span> label of our assembly code and then
print the result:</p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><a href="code/a86/main.c"><span class="stt">a86/main.c</span></a></span></p><blockquote class="Rfilecontent"><p><div class="sourceCode" id="cb1"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;inttypes.h&gt;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int64_t</span> entry();</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main(<span class="dt">int</span> argc, <span class="dt">char</span>** argv) {</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">int64_t</span> result = entry();</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  printf(<span class="st">&quot;%&quot;</span> PRId64 <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>, result);</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="dv">0</span>;</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</p></blockquote></blockquote><p>Notice that from the C program&rsquo;s perspective, the assembly
code defines what looks like a C function called <span class="stt">entry</span>
that returns an <span class="stt">int64_t</span> result.</p><p>How does this work? When the C program calls <span class="stt">entry</span> it
places a return pointer on the stack and jumps to <span class="stt">entry</span>. The fact that we decided to put the result in
register <span class="stt">rax</span> was not arbitrary &ndash; that&rsquo;s the register
that by convention is used for a return value. When the
assembly code executes it&rsquo;s final <span class="stt">ret</span> instruction, it
jumps back to C with the 36th triangular number in <span class="stt">rax</span>,
which the C side knows is the return value. This convention
is part of a larger set of conventions known as the <span style="font-weight: bold">Application Binary Interface</span>. For a reference, see the
<a href="Texts.html" data-pltdoc="x">Texts</a> section of the notes.</p><p>We can compile the <span class="stt">main.c</span> C program to an object file with <span class="stt">gcc</span>:</p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">shell</span></span></p><blockquote class="Rfilecontent"><p><div class="sourceCode" id="cb1"><pre class="sourceCode fish"><code class="sourceCode fish"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="er">&gt;</span> gcc -c main.c -o main.o</span></code></pre></div>
</p></blockquote></blockquote><p>Now we can make an executable by linking the two together:</p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">shell</span></span></p><blockquote class="Rfilecontent"><p><div class="sourceCode" id="cb1"><pre class="sourceCode fish"><code class="sourceCode fish"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="er">&gt;</span> gcc main.o tri.o -o tri</span></code></pre></div>
</p></blockquote></blockquote><p>Finally, we can run the executable:</p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">shell</span></span></p><blockquote class="Rfilecontent"><p><div class="sourceCode" id="cb1"><pre class="sourceCode fish"><code class="sourceCode fish"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="er">&gt;</span> ./tri</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>666</span></code></pre></div>
</p></blockquote></blockquote><p>There, of course, is a lot more to x86-64 than what&rsquo;s been
shown here. If you want to dig deeper, check the references
in <a href="Texts.html" data-pltdoc="x">Texts</a>.  But now let&rsquo;s turn to a86.</p><h5>3.3<tt>&nbsp;</tt><a name="(part._a86__.Representing_x86_.Code_as_.Data)"></a>a86: Representing x86 Code as Data</h5><p>Here we will employ one of the great ideas in computer
science: we will represent programs as data. Rather than
toil away at the level of x86, writing programs directly in
nasm syntax, compiling, and running them, we will instead
design a data type definition for representing x86 programs
and <span class="emph">compute</span> programs.</p><p>Our representation will not be complete &ndash; this is going to
help us simplify x86 down to something manageable. We won&rsquo;t
cover every instruction and we won&rsquo;t cover every variation
of the instructions we do cover.</p><p>An a86 program is a list of a86 instructions. Each
instruction is represented as a structure, described in the
following section.</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Before working through these examples, you&rsquo;ll need to
install the <a href="#%28mod-path._a86%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">a86</span></a> module, part of the <span class="stt">langs</span> package
for this course.  See <a href="Software.html#%28part._langs-package%29" data-pltdoc="x">The <span class="stt">langs</span> package</a> for details on
installing.</p></blockquote></blockquote></blockquote><p>Here&rsquo;s the triangular number example:</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._~25%29%29" class="RktValLink" data-pltdoc="x">%</a></span>, <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._~25~25%29%29" class="RktValLink" data-pltdoc="x">%%</a></span>, and <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._~25~25~25%29%29" class="RktValLink" data-pltdoc="x">%%%</a></span> are
constructors for assembly comments.</p></blockquote></blockquote></blockquote><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">import the a86 library</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._require%29%29" class="RktStxLink" data-pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktSym">a86</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">a86 code that computes the 36th triangular number</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">tri-36</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">Global</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rbx</span><span class="hspace">&nbsp;</span><span class="RktVal">36</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._~25%29%29" class="RktValLink" data-pltdoc="x">%</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"the \"input\""</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._~25~25~25%29%29" class="RktValLink" data-pltdoc="x">%%%</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"tri: a recursive function for computing nth"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._~25~25~25%29%29" class="RktValLink" data-pltdoc="x">%%%</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"triangular number, where n is given in rbx."</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">tri</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Cmp%29%29" class="RktValLink" data-pltdoc="x">Cmp</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rbx</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._~25%29%29" class="RktValLink" data-pltdoc="x">%</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"if rbx = 0, done"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Je%29%29" class="RktValLink" data-pltdoc="x">Je</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">done</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Push%29%29" class="RktValLink" data-pltdoc="x">Push</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rbx</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._~25%29%29" class="RktValLink" data-pltdoc="x">%</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"save rbx"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Sub%29%29" class="RktValLink" data-pltdoc="x">Sub</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rbx</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Call%29%29" class="RktValLink" data-pltdoc="x">Call</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">tri</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._~25%29%29" class="RktValLink" data-pltdoc="x">%</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"compute tri(rbx-1) in rax"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Pop%29%29" class="RktValLink" data-pltdoc="x">Pop</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rbx</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._~25%29%29" class="RktValLink" data-pltdoc="x">%</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"restore rbx"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Add%29%29" class="RktValLink" data-pltdoc="x">Add</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rbx</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._~25%29%29" class="RktValLink" data-pltdoc="x">%</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"result is rbx+tri(rbx-1)"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">done</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._~25%29%29" class="RktValLink" data-pltdoc="x">%</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"jump here for base case"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._~25%29%29" class="RktValLink" data-pltdoc="x">%</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"return 0"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></blockquote></blockquote><p><div class="SIntrapara">This code should look familiar. At first glance it&rsquo;s just
the x86 code with more parentheses. </div><div class="SIntrapara"><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>And who
doesn&rsquo;t love more parentheses?</p></blockquote></blockquote></blockquote></div><div class="SIntrapara"> But something fundamental
has happended. This a86 program is just a value in Racket.
This means we can use Racket as a <span style="font-weight: bold">Meta-Language</span> to
write programs that compute <span class="emph">with</span> x86 programs.</div></p><p>So for example, let&rsquo;s say you have two a86 programs and you
want to glue them together into one: well that just
<span class="RktSym"><a href="http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._append%29%29" class="RktValLink" data-pltdoc="x">append</a></span>. Suppose you want to compute which registers
are used in a given a86 program? Suppose you want to replace
uses of <span class="RktVal">'</span><span class="RktVal">rax</span> with <span class="RktVal">'</span><span class="RktVal">rdi</span>? It just a matter
of writing the right Racket function to do it.</p><p>Here&rsquo;s another immediate benefit. Instead of writing a
single x86 program, let&rsquo;s write an infinite set of a86
programs, one for computing each <span style="font-style: italic">n</span>th triangular
number.  Easy-peasy:</p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Natural -&gt; a86</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Computes a86 code that computes the </span><span style="font-style: italic">n</span><span class="RktCmt">th triangular number</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">tri</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">Global</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rbx</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._~25%29%29" class="RktValLink" data-pltdoc="x">%</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"the \"input\""</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._~25~25~25%29%29" class="RktValLink" data-pltdoc="x">%%%</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"tri: a recursive function for computing nth"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._~25~25~25%29%29" class="RktValLink" data-pltdoc="x">%%%</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"triangular number, where n is given in rbx."</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">tri</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Cmp%29%29" class="RktValLink" data-pltdoc="x">Cmp</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rbx</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._~25%29%29" class="RktValLink" data-pltdoc="x">%</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"if rbx = 0, done"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Je%29%29" class="RktValLink" data-pltdoc="x">Je</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">done</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Push%29%29" class="RktValLink" data-pltdoc="x">Push</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rbx</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._~25%29%29" class="RktValLink" data-pltdoc="x">%</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"save rbx"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Sub%29%29" class="RktValLink" data-pltdoc="x">Sub</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rbx</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Call%29%29" class="RktValLink" data-pltdoc="x">Call</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">tri</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._~25%29%29" class="RktValLink" data-pltdoc="x">%</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"compute tri(rbx-1) in rax"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Pop%29%29" class="RktValLink" data-pltdoc="x">Pop</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rbx</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._~25%29%29" class="RktValLink" data-pltdoc="x">%</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"restore rbx"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Add%29%29" class="RktValLink" data-pltdoc="x">Add</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rbx</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._~25%29%29" class="RktValLink" data-pltdoc="x">%</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"result is rbx+tri(rbx-1)"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">done</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">recreate original program</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">tri-36</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">tri</span><span class="hspace">&nbsp;</span><span class="RktVal">36</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote></blockquote><p>It&rsquo;s also easy to go from our data representation to its
interpretation as an x86 program.</p><p>First, we convert the data to a string. There is a function
provided for converting from a86 to a string representation
of x86 code in nasm notation, called <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fprinter..rkt%29._asm-string%29%29" class="RktValLink" data-pltdoc="x">asm-string</a></span>.
You can use <span class="RktSym"><a href="http://docs.racket-lang.org/reference/Writing.html#%28def._%28%28quote._~23~25kernel%29._display%29%29" class="RktValLink" data-pltdoc="x">display</a></span> to print this to the current
output port (or to a file):</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>The <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fprinter..rkt%29._asm-string%29%29" class="RktValLink" data-pltdoc="x">asm-string</a></span> function knows what OS you are
using and adjusts the label naming convention to use underscores or
not, so that you don&rsquo;t have to worry about it.</p></blockquote></blockquote></blockquote><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/Writing.html#%28def._%28%28quote._~23~25kernel%29._display%29%29" class="RktValLink" data-pltdoc="x">display</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fprinter..rkt%29._asm-string%29%29" class="RktValLink" data-pltdoc="x">asm-string</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">tri</span><span class="hspace">&nbsp;</span><span class="RktVal">36</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">default rel</span></p></td></tr><tr><td><p><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">section .text</span></p></td></tr><tr><td><p><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">global _entry</span></p></td></tr><tr><td><p><span class="RktOut">_entry:</span></p></td></tr><tr><td><p><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">mov rbx, 36 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">; the "input"</span></p></td></tr><tr><td><p><span class="RktOut">;;; tri: a recursive function for computing nth</span></p></td></tr><tr><td><p><span class="RktOut">;;; triangular number, where n is given in rbx.</span></p></td></tr><tr><td><p><span class="RktOut">_tri:</span></p></td></tr><tr><td><p><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">cmp rbx, 0</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">; if rbx = 0, done</span></p></td></tr><tr><td><p><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">je _done</span></p></td></tr><tr><td><p><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">push rbx</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">; save rbx</span></p></td></tr><tr><td><p><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">sub rbx, 1</span></p></td></tr><tr><td><p><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">call _tri </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">; compute tri(rbx-1) in rax</span></p></td></tr><tr><td><p><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">pop rbx </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">; restore rbx</span></p></td></tr><tr><td><p><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">add rax, rbx</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">; result is rbx+tri(rbx-1)</span></p></td></tr><tr><td><p><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">ret</span></p></td></tr><tr><td><p><span class="RktOut">_done:</span></p></td></tr><tr><td><p><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">mov rax, 0</span></p></td></tr><tr><td><p><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">ret</span></p></td></tr></table></td></tr></table></blockquote></blockquote></blockquote><p>Notice how this generates exactly what you saw in <span class="stt">tri.s</span>.</p><p>From here, we can assemble, link, and execute.</p><p>We can also, since we have a general purpose programming
language at our disposal in the meta-language, write a
program to do all that for us:</p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValLink" data-pltdoc="x">asm-interp</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">tri</span><span class="hspace">&nbsp;</span><span class="RktVal">36</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">666</span></p></td></tr></table></blockquote></blockquote></blockquote><p>The <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValLink" data-pltdoc="x">asm-interp</a></span> function consumes an <span class="stt">a86</span>
program as input and produces the integer result the program
computes, i.e. it is an <span style="font-weight: bold">Interpreter</span> for a86. Behind
the scenes it does this by converting to nasm, assemblying,
compiling a thin C wrapper, executing the program, and
reading the result. This will be a rather handy tool both in
interactively exploring the a86 language (you can write
assembly in a REPL), but also an important tool when it
comes time to test the compilers we write.</p><h5>3.4<tt>&nbsp;</tt><a name="(part._stacks)"></a>Stacks: pushing, popping, calling, returning</h5><p>The a86 execution model includes access to memory that can
be used as a stack data structure. There are operations that
manipulate the stack, such as <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Push%29%29" class="RktValLink" data-pltdoc="x">Push</a></span>, <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Pop%29%29" class="RktValLink" data-pltdoc="x">Pop</a></span>,
<span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Call%29%29" class="RktValLink" data-pltdoc="x">Call</a></span>, and <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span>, and the stack register
pointer <span class="RktVal">'</span><span class="RktVal">rsp</span> is dedicated to the stack. Stack
memory is allocated in &ldquo;low&rdquo; address space and grows
downward. So pushing an element on to the stack <span class="emph">decrements</span> <span class="RktVal">'</span><span class="RktVal">rsp</span>.</p><p>The stack is useful as a way to save away values that may be
needed later. For example, let&rsquo;s say you have two
(assembly-level) functions and you want to produce the sum
of their results. By convention, functions return their
result in <span class="RktVal">'</span><span class="RktVal">rax</span>, so doing something like this
won&rsquo;t work:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._seq%29%29" class="RktValLink" data-pltdoc="x">seq</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Call%29%29" class="RktValLink" data-pltdoc="x">Call</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Call%29%29" class="RktValLink" data-pltdoc="x">Call</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">g</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Add%29%29" class="RktValLink" data-pltdoc="x">Add</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>The problem is the return value of <span class="RktVal">'</span><span class="RktVal">f</span> gets
clobbered by <span class="RktVal">'</span><span class="RktVal">g</span>. You might be tempted to fix the
problem by moving the result to another register:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._seq%29%29" class="RktValLink" data-pltdoc="x">seq</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Call%29%29" class="RktValLink" data-pltdoc="x">Call</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rbx</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Call%29%29" class="RktValLink" data-pltdoc="x">Call</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">g</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Add%29%29" class="RktValLink" data-pltdoc="x">Add</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rbx</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>This works only so long as <span class="RktVal">'</span><span class="RktVal">g</span> doesn&rsquo;t clobber
<span class="RktVal">'</span><span class="RktVal">rbx</span>. In general, it might not be possible to avoid
that situation.  So the solution is to use the stack to save
the return value of <span class="RktVal">'</span><span class="RktVal">f</span> while the call to <span class="RktVal">'</span><span class="RktVal">g</span>
proceeds:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._seq%29%29" class="RktValLink" data-pltdoc="x">seq</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Call%29%29" class="RktValLink" data-pltdoc="x">Call</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Push%29%29" class="RktValLink" data-pltdoc="x">Push</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Call%29%29" class="RktValLink" data-pltdoc="x">Call</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">g</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Pop%29%29" class="RktValLink" data-pltdoc="x">Pop</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rbx</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Add%29%29" class="RktValLink" data-pltdoc="x">Add</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rbx</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>This code pushes the value in <span class="RktVal">'</span><span class="RktVal">rax</span> on to the stack
and then pops it off and into <span class="RktVal">'</span><span class="RktVal">rbx</span> after
<span class="RktVal">'</span><span class="RktVal">g</span> returns. Everything works out so long as
<span class="RktVal">'</span><span class="RktVal">g</span> maintains a stack-discipline, i.e. the stack
should be in the same state when <span class="RktVal">'</span><span class="RktVal">g</span> returns as when
it was called.</p><p>We can make a complete example to confirm that this works as
expected. First let&rsquo;s set up a little function for letting
us try out examples:</p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eg</span><span class="hspace">&nbsp;</span><span class="RktSym">asm</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValLink" data-pltdoc="x">asm-interp</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">Global</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">asm</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">the example code we want to try out</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">f</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">calling </span><span class="RktCmt">'</span><span class="RktCmt">f returns 36</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">36</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">g</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">calling </span><span class="RktCmt">'</span><span class="RktCmt">g returns 6, but</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rbx</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">it clobbers </span><span class="RktCmt">'</span><span class="RktCmt">rbx just for the lulz</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">6</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></blockquote></blockquote><p>Now let&rsquo;s try it, using the stack to confirm it does the
right thing:</p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">eg</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._seq%29%29" class="RktValLink" data-pltdoc="x">seq</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Call%29%29" class="RktValLink" data-pltdoc="x">Call</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Push%29%29" class="RktValLink" data-pltdoc="x">Push</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Call%29%29" class="RktValLink" data-pltdoc="x">Call</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">g</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Pop%29%29" class="RktValLink" data-pltdoc="x">Pop</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rbx</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Add%29%29" class="RktValLink" data-pltdoc="x">Add</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rbx</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">42</span></p></td></tr></table></blockquote></blockquote></blockquote><p>Compare that with the first version that used a register to
save the result of <span class="RktVal">'</span><span class="RktVal">f</span>:</p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">eg</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._seq%29%29" class="RktValLink" data-pltdoc="x">seq</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Call%29%29" class="RktValLink" data-pltdoc="x">Call</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rbx</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Call%29%29" class="RktValLink" data-pltdoc="x">Call</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">g</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Add%29%29" class="RktValLink" data-pltdoc="x">Add</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rbx</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">10</span></p></td></tr></table></blockquote></blockquote></blockquote><p>The <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Push%29%29" class="RktValLink" data-pltdoc="x">Push</a></span> and <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Pop%29%29" class="RktValLink" data-pltdoc="x">Pop</a></span> instructions offer a
useful illusion, but of course, there&rsquo;s not really any data
structure abstraction here; there&rsquo;s just raw memory and
registers. But so long as code abides by conventions, the
illusion turns out to be the true state of affairs.</p><p>What&rsquo;s really going on under the hood of <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Push%29%29" class="RktValLink" data-pltdoc="x">Push</a></span> and
<span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Pop%29%29" class="RktValLink" data-pltdoc="x">Pop</a></span> is that the <span class="RktVal">'</span><span class="RktVal">rsp</span> register is
decremented and the value is written to the memory location
pointed to by the value of <span class="RktVal">'</span><span class="RktVal">rsp</span>.</p><p>The following code is equivalent to what we wrote above:</p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">eg</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._seq%29%29" class="RktValLink" data-pltdoc="x">seq</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Call%29%29" class="RktValLink" data-pltdoc="x">Call</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Sub%29%29" class="RktValLink" data-pltdoc="x">Sub</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rsp</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">"allocate" a word on the stack</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Offset%29%29" class="RktValLink" data-pltdoc="x">Offset</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rsp</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">write </span><span class="RktCmt">'</span><span class="RktCmt">rax to top frame</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Call%29%29" class="RktValLink" data-pltdoc="x">Call</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">g</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rbx</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Offset%29%29" class="RktValLink" data-pltdoc="x">Offset</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rsp</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">load top frame into </span><span class="RktCmt">'</span><span class="RktCmt">rbx</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Add%29%29" class="RktValLink" data-pltdoc="x">Add</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rsp</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">"deallocate" word on the stack</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Add%29%29" class="RktValLink" data-pltdoc="x">Add</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rbx</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">42</span></p></td></tr></table></blockquote></blockquote></blockquote><p>As you can see from this code, it would be easy to violate
the usual invariants of stack data structure to, for
example, access elements beyond the top of the stack. The
value of <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Push%29%29" class="RktValLink" data-pltdoc="x">Push</a></span> and <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Pop%29%29" class="RktValLink" data-pltdoc="x">Pop</a></span> is they make clear
that you are using things in a stack-like way and they keep
you from screwing up the accesses, offsets, and adjustments
to <span class="RktVal">'</span><span class="RktVal">rsp</span>.</p><p>Just as <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Push%29%29" class="RktValLink" data-pltdoc="x">Push</a></span> and <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Pop%29%29" class="RktValLink" data-pltdoc="x">Pop</a></span> are useful illusions,
so too are <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Call%29%29" class="RktValLink" data-pltdoc="x">Call</a></span> and <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span>. They give the
impression that there is a notion of a procedure and
procedure call mechanism in assembly, but actually there&rsquo;s
no such thing.</p><p>Think for a moment about what it means to &ldquo;call&rdquo; <span class="RktVal">'</span><span class="RktVal">f</span>
in the examples above. When executing <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Call%29%29" class="RktValLink" data-pltdoc="x">Call</a></span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">f</span><span class="RktPn">)</span>,
control jumps to the instruction following
<span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">f</span><span class="RktPn">)</span>. When we then get to <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span>,
somehow the CPU knows to jump <span class="emph">back</span> to the instruction
following the <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Call%29%29" class="RktValLink" data-pltdoc="x">Call</a></span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">f</span><span class="RktPn">)</span> that we started with.</p><p>What&rsquo;s really going on is that <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Call%29%29" class="RktValLink" data-pltdoc="x">Call</a></span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">f</span><span class="RktPn">)</span> is pushing
the address of subsequent instruction on to the stack and
then jumping to the label <span class="RktVal">'</span><span class="RktVal">f</span>. This works in concert
with <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span>, which pops the return address off the
stack and jumping to it.</p><p>Just as we could write equivalent code without <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Push%29%29" class="RktValLink" data-pltdoc="x">Push</a></span>
and <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Pop%29%29" class="RktValLink" data-pltdoc="x">Pop</a></span>, we can write the same code without
<span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Call%29%29" class="RktValLink" data-pltdoc="x">Call</a></span> and <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span>.</p><p>We do need one new trick, which is the <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Lea%29%29" class="RktValLink" data-pltdoc="x">Lea</a></span>
instruction, which loads an effective address. You can think
of it like <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span> except that it loads the address of
something rather than what is pointed to by an address.  For our
purposes, it is useful for loading the address of a label:</p><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Lea%29%29" class="RktValLink" data-pltdoc="x">Lea</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">f</span><span class="RktPn">)</span></p></blockquote><p>This instruction puts <span class="emph">the address</span> of label
<span class="RktVal">'</span><span class="RktVal">f</span> into <span class="RktSym">rax</span>. You can think of this as
loading a <span class="emph">function pointer</span> into <span class="RktVal">'</span><span class="RktVal">rax</span>. With
this new instruction, we can illuminate what is really going
on with <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Call%29%29" class="RktValLink" data-pltdoc="x">Call</a></span> and <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span>:</p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">eg</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._seq%29%29" class="RktValLink" data-pltdoc="x">seq</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Lea%29%29" class="RktValLink" data-pltdoc="x">Lea</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">fret</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">load address of </span><span class="RktCmt">'</span><span class="RktCmt">fret label into </span><span class="RktCmt">'</span><span class="RktCmt">rax</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Push%29%29" class="RktValLink" data-pltdoc="x">Push</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">push the return pointer on to stack</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Jmp%29%29" class="RktValLink" data-pltdoc="x">Jmp</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">f</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">jump to </span><span class="RktCmt">'</span><span class="RktCmt">f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">fret</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">&lt;</span><span class="RktCmt">&ndash;</span><span class="RktCmt"> return point for "call" to </span><span class="RktCmt">'</span><span class="RktCmt">f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Push%29%29" class="RktValLink" data-pltdoc="x">Push</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">save result (like before)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Lea%29%29" class="RktValLink" data-pltdoc="x">Lea</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">gret</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">load address of </span><span class="RktCmt">'</span><span class="RktCmt">gret label into </span><span class="RktCmt">'</span><span class="RktCmt">rax</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Push%29%29" class="RktValLink" data-pltdoc="x">Push</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">push the return pointer on to stack</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Jmp%29%29" class="RktValLink" data-pltdoc="x">Jmp</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">g</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">jump to </span><span class="RktCmt">'</span><span class="RktCmt">g</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">gret</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">&lt;</span><span class="RktCmt">&ndash;</span><span class="RktCmt"> return point for "call" to </span><span class="RktCmt">'</span><span class="RktCmt">g</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Pop%29%29" class="RktValLink" data-pltdoc="x">Pop</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rbx</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">pop saved result from calling </span><span class="RktCmt">'</span><span class="RktCmt">f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Add%29%29" class="RktValLink" data-pltdoc="x">Add</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rbx</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">42</span></p></td></tr></table></blockquote></blockquote></blockquote><p>The above shows how to encode <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Call%29%29" class="RktValLink" data-pltdoc="x">Call</a></span> as <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Lea%29%29" class="RktValLink" data-pltdoc="x">Lea</a></span>,
<span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Push%29%29" class="RktValLink" data-pltdoc="x">Push</a></span>, and <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Jmp%29%29" class="RktValLink" data-pltdoc="x">Jmp</a></span>.  The encoding of <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span> is just:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._seq%29%29" class="RktValLink" data-pltdoc="x">seq</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Pop%29%29" class="RktValLink" data-pltdoc="x">Pop</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rbx</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Jmp%29%29" class="RktValLink" data-pltdoc="x">Jmp</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rbx</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><h5>3.5<tt>&nbsp;</tt><a name="(part._a86_.Reference)"></a><a name="(mod-path._a86)"></a>a86 Reference</h5><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._require%29%29" class="RktStxLink" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._a86%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">a86</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/langs" title="Install this package using `raco pkg install langs`"><span class="stt">langs</span></a></span></td></tr></table></p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>The a86 language may evolve some over the
course of the semester, but we will aim to document any
changes by updating this section. Also, because the run-time
system changes for each language, you may need to do some
work to have <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValLink" data-pltdoc="x">asm-interp</a></span> cooperate with your
run-time system.</p></blockquote></blockquote></blockquote><p>This module provides all of the bindings from
<a href="#%28mod-path._a86%2Fast%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">a86/ast</span></a>,<a href="#%28mod-path._a86%2Fprinter%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">a86/printer</span></a>,
and <a href="#%28mod-path._a86%2Finterp%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">a86/interp</span></a>, described below</p><h5>3.6<tt>&nbsp;</tt><a name="(part._.Instruction_set)"></a><a name="(mod-path._a86/ast)"></a>Instruction set</h5><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._require%29%29" class="RktStxLink" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._a86%2Fast%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">a86/ast</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/langs" title="Install this package using `raco pkg install langs`"><span class="stt">langs</span></a></span></td></tr></table></p><p>This section describes the instruction set of a86.</p><p>There are 16 registers: <span class="RktVal">'</span><span class="RktVal">rax</span>, <span class="RktVal">'</span><span class="RktVal">rbx</span>,
<span class="RktVal">'</span><span class="RktVal">rcx</span>, <span class="RktVal">'</span><span class="RktVal">rdx</span>, <span class="RktVal">'</span><span class="RktVal">rbp</span>, <span class="RktVal">'</span><span class="RktVal">rsp</span>,
<span class="RktVal">'</span><span class="RktVal">rsi</span>, <span class="RktVal">'</span><span class="RktVal">rdi</span>, <span class="RktVal">'</span><span class="RktVal">r8</span>, <span class="RktVal">'</span><span class="RktVal">r9</span>,
<span class="RktVal">'</span><span class="RktVal">r10</span>, <span class="RktVal">'</span><span class="RktVal">r11</span>, <span class="RktVal">'</span><span class="RktVal">r12</span>, <span class="RktVal">'</span><span class="RktVal">r13</span>,
<span class="RktVal">'</span><span class="RktVal">r14</span>, and <span class="RktVal">'</span><span class="RktVal">r15</span>. These registers are
64-bits wide. There is no analog to the x86 register
suffixes for accessing low-order bits. Each register plays
the same role as in x86, so for example <span class="RktVal">'</span><span class="RktVal">rsp</span> holds
the current location of the stack.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._a86/ast..rkt)._register~3f))"></a><span title="Provided from: a86/ast | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._register~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">register?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/booleans.html#%28def._%28%28quote._~23~25kernel%29._boolean~3f%29%29" class="RktValLink" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">A predicate for registers.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._a86/ast..rkt)._label~3f))"></a><span title="Provided from: a86/ast | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._label~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">label?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/booleans.html#%28def._%28%28quote._~23~25kernel%29._boolean~3f%29%29" class="RktValLink" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">A predicate for label <span class="emph">names</span>, i.e. symbols which are not register names.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._a86/ast..rkt)._instruction~3f))"></a><span title="Provided from: a86/ast | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._instruction~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">instruction?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/booleans.html#%28def._%28%28quote._~23~25kernel%29._boolean~3f%29%29" class="RktValLink" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">A predicate for instructions.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._a86/ast..rkt)._offset~3f))"></a><span title="Provided from: a86/ast | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._offset~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">offset?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/booleans.html#%28def._%28%28quote._~23~25kernel%29._boolean~3f%29%29" class="RktValLink" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">A predicate for offsets.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._a86/ast..rkt)._seq))"></a><span title="Provided from: a86/ast | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._seq%29%29" class="RktValDef RktValLink" data-pltdoc="x">seq</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">x</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._listof%29%29" class="RktValLink" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._instruction~3f%29%29" class="RktValLink" data-pltdoc="x">instruction?</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._instruction~3f%29%29" class="RktValLink" data-pltdoc="x">instruction?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._listof%29%29" class="RktValLink" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._instruction~3f%29%29" class="RktValLink" data-pltdoc="x">instruction?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">A convenience function for splicing togeter instructions and lists of instructions.</div></p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._seq%29%29" class="RktValLink" data-pltdoc="x">seq</a></span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'()</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._seq%29%29" class="RktValLink" data-pltdoc="x">seq</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">foo</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">(list (Label 'foo))</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._seq%29%29" class="RktValLink" data-pltdoc="x">seq</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">foo</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">(list (Label 'foo))</span></p></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._seq%29%29" class="RktValLink" data-pltdoc="x">seq</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">foo</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rdx</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Call%29%29" class="RktValLink" data-pltdoc="x">Call</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">bar</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktRes">(list</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes">(Label 'foo)</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes">(Mov 'rax 0)</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes">(Mov 'rdx 'rax)</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes">(Call 'bar)</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes">(Ret))</span></p></td></tr></table></td></tr></table></blockquote></blockquote></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._a86/ast..rkt)._prog))"></a><span title="Provided from: a86/ast | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValDef RktValLink" data-pltdoc="x">prog</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">x</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._listof%29%29" class="RktValLink" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._instruction~3f%29%29" class="RktValLink" data-pltdoc="x">instruction?</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._instruction~3f%29%29" class="RktValLink" data-pltdoc="x">instruction?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._listof%29%29" class="RktValLink" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._instruction~3f%29%29" class="RktValLink" data-pltdoc="x">instruction?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._seq%29%29" class="RktValLink" data-pltdoc="x">seq</a></span>, but also checks that the instructions
are well-formed in the following sense:</div></p><ul><li><p>Programs have at least one label; the first label is used as the entry point.</p></li><li><p>All label declarations are unique.</p></li><li><p>All label targets are declared.</p></li><li><p>... other properties may be added in the future.</p></li></ul><p>This function is useful to do some early error checking
over whole programs and can help avoid confusing NASM
errors. Unlike <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._seq%29%29" class="RktValLink" data-pltdoc="x">seq</a></span> it should be called at the
outermost level of a function that produces a86 code and not
nested.</p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">foo</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">(list (Label 'foo))</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">foo</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">(list (Label 'foo))</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">32</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktErr">prog: no initial label found</span></p></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">foo</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">foo</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktErr">prog: duplicate label declaration found: 'foo</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Jmp%29%29" class="RktValLink" data-pltdoc="x">Jmp</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">foo</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktErr">prog: undeclared labels found: '(foo)</span></p></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">foo</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Jmp%29%29" class="RktValLink" data-pltdoc="x">Jmp</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">foo</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">(list (Label 'foo) (Jmp 'foo))</span></p></td></tr></table></blockquote></blockquote></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define-struct.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._struct%29%29" class="RktStxLink" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._a86/ast..rkt)._~25-s))"></a><a name="(def._((lib._a86/ast..rkt)._~25~3f))"></a><a name="(def._((lib._a86/ast..rkt)._struct~3a~25))"></a><a name="(def._((lib._a86/ast..rkt)._~25))"></a><span title="Provided from: a86/ast | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._~25%29%29" class="RktValDef RktValLink" data-pltdoc="x">%</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define-struct.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._struct%29%29" class="RktStxLink" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._a86/ast..rkt)._~25~25-s))"></a><a name="(def._((lib._a86/ast..rkt)._~25~25~3f))"></a><a name="(def._((lib._a86/ast..rkt)._struct~3a~25~25))"></a><a name="(def._((lib._a86/ast..rkt)._~25~25))"></a><span title="Provided from: a86/ast | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._~25~25%29%29" class="RktValDef RktValLink" data-pltdoc="x">%%</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define-struct.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._struct%29%29" class="RktStxLink" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._a86/ast..rkt)._~25~25~25-s))"></a><a name="(def._((lib._a86/ast..rkt)._~25~25~25~3f))"></a><a name="(def._((lib._a86/ast..rkt)._struct~3a~25~25~25))"></a><a name="(def._((lib._a86/ast..rkt)._~25~25~25))"></a><span title="Provided from: a86/ast | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._~25~25~25%29%29" class="RktValDef RktValLink" data-pltdoc="x">%%%</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Creates a comment in the assembly code. The <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._~25%29%29" class="RktValLink" data-pltdoc="x">%</a></span>
constructor adds a comment toward the right side of the
current line; <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._~25~25%29%29" class="RktValLink" data-pltdoc="x">%%</a></span> creates a comment on its own line
1 tab over; <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._~25~25~25%29%29" class="RktValLink" data-pltdoc="x">%%%</a></span> creates a comment on its own line
aligned to the left.</div></p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/Writing.html#%28def._%28%28quote._~23~25kernel%29._display%29%29" class="RktValLink" data-pltdoc="x">display</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fprinter..rkt%29._asm-string%29%29" class="RktValLink" data-pltdoc="x">asm-string</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._~25~25~25%29%29" class="RktValLink" data-pltdoc="x">%%%</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"Start of foo"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">foo</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Racket comments won</span><span class="RktCmt">'</span><span class="RktCmt">t appear</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._~25~25%29%29" class="RktValLink" data-pltdoc="x">%%</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"Inputs one argument in rdi"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rdi</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Add%29%29" class="RktValLink" data-pltdoc="x">Add</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._~25%29%29" class="RktValLink" data-pltdoc="x">%</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"double it"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Sub%29%29" class="RktValLink" data-pltdoc="x">Sub</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._~25%29%29" class="RktValLink" data-pltdoc="x">%</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"subtract one"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._~25~25%29%29" class="RktValLink" data-pltdoc="x">%%</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"we're done!"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">default rel</span></p></td></tr><tr><td><p><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">section .text</span></p></td></tr><tr><td><p><span class="RktOut">;;; Start of foo</span></p></td></tr><tr><td><p><span class="RktOut">_foo:</span></p></td></tr><tr><td><p><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">;; Inputs one argument in rdi</span></p></td></tr><tr><td><p><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">mov rax, rdi</span></p></td></tr><tr><td><p><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">add rax, rax</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">; double it</span></p></td></tr><tr><td><p><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">sub rax, 1</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">; subtract one</span></p></td></tr><tr><td><p><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">;; we're done!</span></p></td></tr><tr><td><p><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">ret</span></p></td></tr></table></td></tr></table></blockquote></blockquote></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define-struct.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._struct%29%29" class="RktStxLink" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._a86/ast..rkt)._.Offset-i))"></a><a name="(def._((lib._a86/ast..rkt)._.Offset-r))"></a><a name="(def._((lib._a86/ast..rkt)._.Offset~3f))"></a><a name="(def._((lib._a86/ast..rkt)._struct~3a.Offset))"></a><a name="(def._((lib._a86/ast..rkt)._.Offset))"></a><span title="Provided from: a86/ast | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Offset%29%29" class="RktValDef RktValLink" data-pltdoc="x">Offset</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">r</span><span class="stt"> </span><span class="RktSym">i</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">r</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._register~3f%29%29" class="RktValLink" data-pltdoc="x">register?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">i</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/number-types.html#%28def._%28%28quote._~23~25kernel%29._exact-integer~3f%29%29" class="RktValLink" data-pltdoc="x">exact-integer?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Creates an memory offset from a register. Offsets are used
as arguments to instructions to indicate memory locations.
An error is signalled when given invalid inputs.</div></p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Offset%29%29" class="RktValLink" data-pltdoc="x">Offset</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">(Offset 'rax 0)</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Offset%29%29" class="RktValLink" data-pltdoc="x">Offset</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">4.1</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktErr">Offset: expects exact integer as second argument; given 4.1</span></p></td></tr></table></blockquote></blockquote></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define-struct.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._struct%29%29" class="RktStxLink" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._a86/ast..rkt)._.Label-x))"></a><a name="(def._((lib._a86/ast..rkt)._.Label~3f))"></a><a name="(def._((lib._a86/ast..rkt)._struct~3a.Label))"></a><a name="(def._((lib._a86/ast..rkt)._.Label))"></a><span title="Provided from: a86/ast | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValDef RktValLink" data-pltdoc="x">Label</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._label~3f%29%29" class="RktValLink" data-pltdoc="x">label?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Creates a label from the given symbol. Each label in a
program must be unique.  Register names cannot be used
as label names.</div></p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">fred</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">(Label 'fred)</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"fred"</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktErr">Label: expects symbol; given "fred"</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktErr">Label: cannot use register as label name; given 'rax</span></p></td></tr></table></blockquote></blockquote></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define-struct.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._struct%29%29" class="RktStxLink" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._a86/ast..rkt)._.Extern-x))"></a><a name="(def._((lib._a86/ast..rkt)._.Extern~3f))"></a><a name="(def._((lib._a86/ast..rkt)._struct~3a.Extern))"></a><a name="(def._((lib._a86/ast..rkt)._.Extern))"></a><span title="Provided from: a86/ast | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Extern%29%29" class="RktValDef RktValLink" data-pltdoc="x">Extern</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._label~3f%29%29" class="RktValLink" data-pltdoc="x">label?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Declares an external label.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define-struct.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._struct%29%29" class="RktStxLink" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._a86/ast..rkt)._.Call-x))"></a><a name="(def._((lib._a86/ast..rkt)._.Call~3f))"></a><a name="(def._((lib._a86/ast..rkt)._struct~3a.Call))"></a><a name="(def._((lib._a86/ast..rkt)._.Call))"></a><span title="Provided from: a86/ast | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Call%29%29" class="RktValDef RktValLink" data-pltdoc="x">Call</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._label~3f%29%29" class="RktValLink" data-pltdoc="x">label?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._register~3f%29%29" class="RktValLink" data-pltdoc="x">register?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">A call instruction.</div></p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValLink" data-pltdoc="x">asm-interp</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">Global</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Call%29%29" class="RktValLink" data-pltdoc="x">Call</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Add%29%29" class="RktValLink" data-pltdoc="x">Add</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">41</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">42</span></p></td></tr></table></blockquote></blockquote></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define-struct.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._struct%29%29" class="RktStxLink" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._a86/ast..rkt)._.Ret~3f))"></a><a name="(def._((lib._a86/ast..rkt)._struct~3a.Ret))"></a><a name="(def._((lib._a86/ast..rkt)._.Ret))"></a><span title="Provided from: a86/ast | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValDef RktValLink" data-pltdoc="x">Ret</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">A return instruction.</div></p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValLink" data-pltdoc="x">asm-interp</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">Global</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">42</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">42</span></p></td></tr></table></blockquote></blockquote></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define-struct.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._struct%29%29" class="RktStxLink" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._a86/ast..rkt)._.Mov-src))"></a><a name="(def._((lib._a86/ast..rkt)._.Mov-dst))"></a><a name="(def._((lib._a86/ast..rkt)._.Mov~3f))"></a><a name="(def._((lib._a86/ast..rkt)._struct~3a.Mov))"></a><a name="(def._((lib._a86/ast..rkt)._.Mov))"></a><span title="Provided from: a86/ast | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValDef RktValLink" data-pltdoc="x">Mov</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">dst</span><span class="stt"> </span><span class="RktSym">src</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">dst</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._register~3f%29%29" class="RktValLink" data-pltdoc="x">register?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._offset~3f%29%29" class="RktValLink" data-pltdoc="x">offset?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">src</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._register~3f%29%29" class="RktValLink" data-pltdoc="x">register?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._offset~3f%29%29" class="RktValLink" data-pltdoc="x">offset?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/number-types.html#%28def._%28%28quote._~23~25kernel%29._exact-integer~3f%29%29" class="RktValLink" data-pltdoc="x">exact-integer?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">A move instruction. Moves <span class="RktSym">src</span> to <span class="RktSym">dst</span>.</div></p><p>Either <span class="RktSym">dst</span> or <span class="RktSym">src</span> may be offsets, but not both.</p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValLink" data-pltdoc="x">asm-interp</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">Global</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rbx</span><span class="hspace">&nbsp;</span><span class="RktVal">42</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rbx</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">42</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Offset%29%29" class="RktValLink" data-pltdoc="x">Offset</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Offset%29%29" class="RktValLink" data-pltdoc="x">Offset</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rbx</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktErr">Mov: cannot use two memory locations; given (Offset 'rax 0),</span></p></td></tr><tr><td><p><span class="RktErr">(Offset 'rbx 0)</span></p></td></tr></table></blockquote></blockquote></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define-struct.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._struct%29%29" class="RktStxLink" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._a86/ast..rkt)._.Add-src))"></a><a name="(def._((lib._a86/ast..rkt)._.Add-dst))"></a><a name="(def._((lib._a86/ast..rkt)._.Add~3f))"></a><a name="(def._((lib._a86/ast..rkt)._struct~3a.Add))"></a><a name="(def._((lib._a86/ast..rkt)._.Add))"></a><span title="Provided from: a86/ast | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Add%29%29" class="RktValDef RktValLink" data-pltdoc="x">Add</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">dst</span><span class="stt"> </span><span class="RktSym">src</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">dst</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._register~3f%29%29" class="RktValLink" data-pltdoc="x">register?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">src</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._register~3f%29%29" class="RktValLink" data-pltdoc="x">register?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._offset~3f%29%29" class="RktValLink" data-pltdoc="x">offset?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/number-types.html#%28def._%28%28quote._~23~25kernel%29._exact-integer~3f%29%29" class="RktValLink" data-pltdoc="x">exact-integer?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">An addition instruction. Adds <span class="RktSym">src</span> to <span class="RktSym">dst</span>
and writes the result to <span class="RktSym">dst</span>.</div></p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValLink" data-pltdoc="x">asm-interp</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">Global</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">32</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Add%29%29" class="RktValLink" data-pltdoc="x">Add</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">42</span></p></td></tr></table></blockquote></blockquote></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define-struct.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._struct%29%29" class="RktStxLink" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._a86/ast..rkt)._.Sub-src))"></a><a name="(def._((lib._a86/ast..rkt)._.Sub-dst))"></a><a name="(def._((lib._a86/ast..rkt)._.Sub~3f))"></a><a name="(def._((lib._a86/ast..rkt)._struct~3a.Sub))"></a><a name="(def._((lib._a86/ast..rkt)._.Sub))"></a><span title="Provided from: a86/ast | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Sub%29%29" class="RktValDef RktValLink" data-pltdoc="x">Sub</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">dst</span><span class="stt"> </span><span class="RktSym">src</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">dst</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._register~3f%29%29" class="RktValLink" data-pltdoc="x">register?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">src</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._register~3f%29%29" class="RktValLink" data-pltdoc="x">register?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._offset~3f%29%29" class="RktValLink" data-pltdoc="x">offset?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/number-types.html#%28def._%28%28quote._~23~25kernel%29._exact-integer~3f%29%29" class="RktValLink" data-pltdoc="x">exact-integer?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">A subtraction instruction. Subtracts <span class="RktSym">src</span> frrom
<span class="RktSym">dst</span> and writes the result to <span class="RktSym">dst</span>.</div></p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValLink" data-pltdoc="x">asm-interp</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">Global</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">32</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Sub%29%29" class="RktValLink" data-pltdoc="x">Sub</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">22</span></p></td></tr></table></blockquote></blockquote></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define-struct.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._struct%29%29" class="RktStxLink" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._a86/ast..rkt)._.Cmp-a2))"></a><a name="(def._((lib._a86/ast..rkt)._.Cmp-a1))"></a><a name="(def._((lib._a86/ast..rkt)._.Cmp~3f))"></a><a name="(def._((lib._a86/ast..rkt)._struct~3a.Cmp))"></a><a name="(def._((lib._a86/ast..rkt)._.Cmp))"></a><span title="Provided from: a86/ast | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Cmp%29%29" class="RktValDef RktValLink" data-pltdoc="x">Cmp</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">a1</span><span class="stt"> </span><span class="RktSym">a2</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">a1</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._register~3f%29%29" class="RktValLink" data-pltdoc="x">register?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._offset~3f%29%29" class="RktValLink" data-pltdoc="x">offset?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">a2</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._register~3f%29%29" class="RktValLink" data-pltdoc="x">register?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._offset~3f%29%29" class="RktValLink" data-pltdoc="x">offset?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/number-types.html#%28def._%28%28quote._~23~25kernel%29._exact-integer~3f%29%29" class="RktValLink" data-pltdoc="x">exact-integer?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Compare <span class="RktSym">a1</span> to <span class="RktSym">a2</span>.  Doing a comparison
sets the status flags that affect the conditional instructions like <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Je%29%29" class="RktValLink" data-pltdoc="x">Je</a></span>, <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Jl%29%29" class="RktValLink" data-pltdoc="x">Jl</a></span>, etc.</div></p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValLink" data-pltdoc="x">asm-interp</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">Global</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">42</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Cmp%29%29" class="RktValLink" data-pltdoc="x">Cmp</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Jg%29%29" class="RktValLink" data-pltdoc="x">Jg</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">l1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">l1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">42</span></p></td></tr></table></blockquote></blockquote></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define-struct.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._struct%29%29" class="RktStxLink" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._a86/ast..rkt)._.Jmp-x))"></a><a name="(def._((lib._a86/ast..rkt)._.Jmp~3f))"></a><a name="(def._((lib._a86/ast..rkt)._struct~3a.Jmp))"></a><a name="(def._((lib._a86/ast..rkt)._.Jmp))"></a><span title="Provided from: a86/ast | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Jmp%29%29" class="RktValDef RktValLink" data-pltdoc="x">Jmp</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._label~3f%29%29" class="RktValLink" data-pltdoc="x">label?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._register~3f%29%29" class="RktValLink" data-pltdoc="x">register?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Jump to label <span class="RktSym">x</span>.</div></p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValLink" data-pltdoc="x">asm-interp</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">Global</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">42</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Jmp%29%29" class="RktValLink" data-pltdoc="x">Jmp</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">l1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">l1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">42</span></p></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValLink" data-pltdoc="x">asm-interp</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">Global</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">42</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Pop%29%29" class="RktValLink" data-pltdoc="x">Pop</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rbx</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Jmp%29%29" class="RktValLink" data-pltdoc="x">Jmp</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rbx</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">42</span></p></td></tr></table></blockquote></blockquote></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define-struct.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._struct%29%29" class="RktStxLink" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._a86/ast..rkt)._.Je-x))"></a><a name="(def._((lib._a86/ast..rkt)._.Je~3f))"></a><a name="(def._((lib._a86/ast..rkt)._struct~3a.Je))"></a><a name="(def._((lib._a86/ast..rkt)._.Je))"></a><span title="Provided from: a86/ast | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Je%29%29" class="RktValDef RktValLink" data-pltdoc="x">Je</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._label~3f%29%29" class="RktValLink" data-pltdoc="x">label?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._register~3f%29%29" class="RktValLink" data-pltdoc="x">register?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Jump to label <span class="RktSym">x</span> if the conditional flag is set to &ldquo;equal.&rdquo;</div></p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValLink" data-pltdoc="x">asm-interp</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">Global</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">42</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Cmp%29%29" class="RktValLink" data-pltdoc="x">Cmp</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Je%29%29" class="RktValLink" data-pltdoc="x">Je</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">l1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">l1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">0</span></p></td></tr></table></blockquote></blockquote></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define-struct.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._struct%29%29" class="RktStxLink" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._a86/ast..rkt)._.Jne-x))"></a><a name="(def._((lib._a86/ast..rkt)._.Jne~3f))"></a><a name="(def._((lib._a86/ast..rkt)._struct~3a.Jne))"></a><a name="(def._((lib._a86/ast..rkt)._.Jne))"></a><span title="Provided from: a86/ast | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Jne%29%29" class="RktValDef RktValLink" data-pltdoc="x">Jne</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._label~3f%29%29" class="RktValLink" data-pltdoc="x">label?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._register~3f%29%29" class="RktValLink" data-pltdoc="x">register?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Jump to label <span class="RktSym">x</span> if the conditional flag is set to &ldquo;not equal.&rdquo;</div></p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValLink" data-pltdoc="x">asm-interp</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">Global</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">42</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Cmp%29%29" class="RktValLink" data-pltdoc="x">Cmp</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Jne%29%29" class="RktValLink" data-pltdoc="x">Jne</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">l1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">l1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">42</span></p></td></tr></table></blockquote></blockquote></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define-struct.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._struct%29%29" class="RktStxLink" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._a86/ast..rkt)._.Jl-x))"></a><a name="(def._((lib._a86/ast..rkt)._.Jl~3f))"></a><a name="(def._((lib._a86/ast..rkt)._struct~3a.Jl))"></a><a name="(def._((lib._a86/ast..rkt)._.Jl))"></a><span title="Provided from: a86/ast | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Jl%29%29" class="RktValDef RktValLink" data-pltdoc="x">Jl</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._label~3f%29%29" class="RktValLink" data-pltdoc="x">label?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._register~3f%29%29" class="RktValLink" data-pltdoc="x">register?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Jump to label <span class="RktSym">x</span> if the conditional flag is set to &ldquo;less than.&rdquo;</div></p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValLink" data-pltdoc="x">asm-interp</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">Global</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">42</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Cmp%29%29" class="RktValLink" data-pltdoc="x">Cmp</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Jl%29%29" class="RktValLink" data-pltdoc="x">Jl</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">l1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">l1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">0</span></p></td></tr></table></blockquote></blockquote></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define-struct.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._struct%29%29" class="RktStxLink" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._a86/ast..rkt)._.Jg-x))"></a><a name="(def._((lib._a86/ast..rkt)._.Jg~3f))"></a><a name="(def._((lib._a86/ast..rkt)._struct~3a.Jg))"></a><a name="(def._((lib._a86/ast..rkt)._.Jg))"></a><span title="Provided from: a86/ast | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Jg%29%29" class="RktValDef RktValLink" data-pltdoc="x">Jg</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._label~3f%29%29" class="RktValLink" data-pltdoc="x">label?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._register~3f%29%29" class="RktValLink" data-pltdoc="x">register?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Jump to label <span class="RktSym">x</span> if the conditional flag is set to &ldquo;greater than.&rdquo;</div></p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValLink" data-pltdoc="x">asm-interp</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">Global</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">42</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Cmp%29%29" class="RktValLink" data-pltdoc="x">Cmp</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Jg%29%29" class="RktValLink" data-pltdoc="x">Jg</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">l1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">l1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">42</span></p></td></tr></table></blockquote></blockquote></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define-struct.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._struct%29%29" class="RktStxLink" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._a86/ast..rkt)._.And-src))"></a><a name="(def._((lib._a86/ast..rkt)._.And-dst))"></a><a name="(def._((lib._a86/ast..rkt)._.And~3f))"></a><a name="(def._((lib._a86/ast..rkt)._struct~3a.And))"></a><a name="(def._((lib._a86/ast..rkt)._.And))"></a><span title="Provided from: a86/ast | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.And%29%29" class="RktValDef RktValLink" data-pltdoc="x">And</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">dst</span><span class="stt"> </span><span class="RktSym">src</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">dst</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._register~3f%29%29" class="RktValLink" data-pltdoc="x">register?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._offset~3f%29%29" class="RktValLink" data-pltdoc="x">offset?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">src</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._register~3f%29%29" class="RktValLink" data-pltdoc="x">register?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._offset~3f%29%29" class="RktValLink" data-pltdoc="x">offset?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/number-types.html#%28def._%28%28quote._~23~25kernel%29._exact-integer~3f%29%29" class="RktValLink" data-pltdoc="x">exact-integer?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Compute logical &ldquo;and&rdquo; of <span class="RktSym">dst</span> and <span class="RktSym">src</span> and put result in <span class="RktSym">dst</span>.</div></p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValLink" data-pltdoc="x">asm-interp</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">Global</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">11</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#b1011 = 11</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.And%29%29" class="RktValLink" data-pltdoc="x">And</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">14</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#b1110 = 14</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">10</span></p></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#b1010 = 10</span></td></tr></table></blockquote></blockquote></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define-struct.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._struct%29%29" class="RktStxLink" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._a86/ast..rkt)._.Or-src))"></a><a name="(def._((lib._a86/ast..rkt)._.Or-dst))"></a><a name="(def._((lib._a86/ast..rkt)._.Or~3f))"></a><a name="(def._((lib._a86/ast..rkt)._struct~3a.Or))"></a><a name="(def._((lib._a86/ast..rkt)._.Or))"></a><span title="Provided from: a86/ast | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Or%29%29" class="RktValDef RktValLink" data-pltdoc="x">Or</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">dst</span><span class="stt"> </span><span class="RktSym">src</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">dst</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._register~3f%29%29" class="RktValLink" data-pltdoc="x">register?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._offset~3f%29%29" class="RktValLink" data-pltdoc="x">offset?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">src</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._register~3f%29%29" class="RktValLink" data-pltdoc="x">register?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._offset~3f%29%29" class="RktValLink" data-pltdoc="x">offset?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/number-types.html#%28def._%28%28quote._~23~25kernel%29._exact-integer~3f%29%29" class="RktValLink" data-pltdoc="x">exact-integer?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Compute logical &ldquo;or&rdquo; of <span class="RktSym">dst</span> and <span class="RktSym">src</span> and put result in <span class="RktSym">dst</span>.</div></p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValLink" data-pltdoc="x">asm-interp</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">Global</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">11</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#b1011 = 11</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Or%29%29" class="RktValLink" data-pltdoc="x">Or</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">14</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#b1110 = 14</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">15</span></p></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#b1111 = 15</span></td></tr></table></blockquote></blockquote></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define-struct.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._struct%29%29" class="RktStxLink" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._a86/ast..rkt)._.Xor-src))"></a><a name="(def._((lib._a86/ast..rkt)._.Xor-dst))"></a><a name="(def._((lib._a86/ast..rkt)._.Xor~3f))"></a><a name="(def._((lib._a86/ast..rkt)._struct~3a.Xor))"></a><a name="(def._((lib._a86/ast..rkt)._.Xor))"></a><span title="Provided from: a86/ast | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Xor%29%29" class="RktValDef RktValLink" data-pltdoc="x">Xor</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">dst</span><span class="stt"> </span><span class="RktSym">src</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">dst</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._register~3f%29%29" class="RktValLink" data-pltdoc="x">register?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._offset~3f%29%29" class="RktValLink" data-pltdoc="x">offset?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">src</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._register~3f%29%29" class="RktValLink" data-pltdoc="x">register?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._offset~3f%29%29" class="RktValLink" data-pltdoc="x">offset?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/number-types.html#%28def._%28%28quote._~23~25kernel%29._exact-integer~3f%29%29" class="RktValLink" data-pltdoc="x">exact-integer?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Compute logical &ldquo;exclusive or&rdquo; of <span class="RktSym">dst</span> and <span class="RktSym">src</span> and put result in <span class="RktSym">dst</span>.</div></p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValLink" data-pltdoc="x">asm-interp</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">Global</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">11</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#b1011 = 11</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Xor%29%29" class="RktValLink" data-pltdoc="x">Xor</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">14</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#b1110 = 14</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">5</span></p></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#b0101 = 5</span></td></tr></table></blockquote></blockquote></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define-struct.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._struct%29%29" class="RktStxLink" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._a86/ast..rkt)._.Sal-i))"></a><a name="(def._((lib._a86/ast..rkt)._.Sal-dst))"></a><a name="(def._((lib._a86/ast..rkt)._.Sal~3f))"></a><a name="(def._((lib._a86/ast..rkt)._struct~3a.Sal))"></a><a name="(def._((lib._a86/ast..rkt)._.Sal))"></a><span title="Provided from: a86/ast | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Sal%29%29" class="RktValDef RktValLink" data-pltdoc="x">Sal</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">dst</span><span class="stt"> </span><span class="RktSym">i</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">dst</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._register~3f%29%29" class="RktValLink" data-pltdoc="x">register?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">i</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._integer-in%29%29" class="RktValLink" data-pltdoc="x">integer-in</a></span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">63</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Shift <span class="RktSym">dst</span> to the left <span class="RktSym">i</span> bits and put result in <span class="RktSym">dst</span>.
The leftmost bits are discarded.</div></p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValLink" data-pltdoc="x">asm-interp</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">Global</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#b100 = 4 = 2^2</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Sal%29%29" class="RktValLink" data-pltdoc="x">Sal</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">6</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">256</span></p></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#b100000000 = 256</span></td></tr></table></blockquote></blockquote></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define-struct.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._struct%29%29" class="RktStxLink" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._a86/ast..rkt)._.Sar-i))"></a><a name="(def._((lib._a86/ast..rkt)._.Sar-dst))"></a><a name="(def._((lib._a86/ast..rkt)._.Sar~3f))"></a><a name="(def._((lib._a86/ast..rkt)._struct~3a.Sar))"></a><a name="(def._((lib._a86/ast..rkt)._.Sar))"></a><span title="Provided from: a86/ast | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Sar%29%29" class="RktValDef RktValLink" data-pltdoc="x">Sar</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">dst</span><span class="stt"> </span><span class="RktSym">i</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">dst</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._register~3f%29%29" class="RktValLink" data-pltdoc="x">register?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">i</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._integer-in%29%29" class="RktValLink" data-pltdoc="x">integer-in</a></span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">63</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Shift <span class="RktSym">dst</span> to the right <span class="RktSym">i</span> bits and put result in <span class="RktSym">dst</span>.
The rightmost bits are discarded.</div></p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValLink" data-pltdoc="x">asm-interp</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">Global</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">256</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#b100000000 = 256</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Sar%29%29" class="RktValLink" data-pltdoc="x">Sar</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">6</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">4</span></p></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#b100 = 4</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValLink" data-pltdoc="x">asm-interp</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">Global</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">269</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#b100001101 = 269</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Sar%29%29" class="RktValLink" data-pltdoc="x">Sar</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">6</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">4</span></p></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#b100 = 4</span></td></tr></table></blockquote></blockquote></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define-struct.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._struct%29%29" class="RktStxLink" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._a86/ast..rkt)._.Push-a1))"></a><a name="(def._((lib._a86/ast..rkt)._.Push~3f))"></a><a name="(def._((lib._a86/ast..rkt)._struct~3a.Push))"></a><a name="(def._((lib._a86/ast..rkt)._.Push))"></a><span title="Provided from: a86/ast | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Push%29%29" class="RktValDef RktValLink" data-pltdoc="x">Push</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">a1</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">a1</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/number-types.html#%28def._%28%28quote._~23~25kernel%29._exact-integer~3f%29%29" class="RktValLink" data-pltdoc="x">exact-integer?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._register~3f%29%29" class="RktValLink" data-pltdoc="x">register?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Decrements the stack pointer and then stores the source
operand on the top of the stack.</div></p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValLink" data-pltdoc="x">asm-interp</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">Global</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">42</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Push%29%29" class="RktValLink" data-pltdoc="x">Push</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Pop%29%29" class="RktValLink" data-pltdoc="x">Pop</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">42</span></p></td></tr></table></blockquote></blockquote></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define-struct.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._struct%29%29" class="RktStxLink" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._a86/ast..rkt)._.Pop-a1))"></a><a name="(def._((lib._a86/ast..rkt)._.Pop~3f))"></a><a name="(def._((lib._a86/ast..rkt)._struct~3a.Pop))"></a><a name="(def._((lib._a86/ast..rkt)._.Pop))"></a><span title="Provided from: a86/ast | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Pop%29%29" class="RktValDef RktValLink" data-pltdoc="x">Pop</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">a1</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">a1</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._register~3f%29%29" class="RktValLink" data-pltdoc="x">register?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Loads the value from the top of the stack to the destination operand and then increments the stack pointer.</div></p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValLink" data-pltdoc="x">asm-interp</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">Global</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">42</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Push%29%29" class="RktValLink" data-pltdoc="x">Push</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Pop%29%29" class="RktValLink" data-pltdoc="x">Pop</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">42</span></p></td></tr></table></blockquote></blockquote></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define-struct.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._struct%29%29" class="RktStxLink" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._a86/ast..rkt)._.Lea-x))"></a><a name="(def._((lib._a86/ast..rkt)._.Lea-dst))"></a><a name="(def._((lib._a86/ast..rkt)._.Lea~3f))"></a><a name="(def._((lib._a86/ast..rkt)._struct~3a.Lea))"></a><a name="(def._((lib._a86/ast..rkt)._.Lea))"></a><span title="Provided from: a86/ast | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Lea%29%29" class="RktValDef RktValLink" data-pltdoc="x">Lea</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">dst</span><span class="stt"> </span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">dst</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._register~3f%29%29" class="RktValLink" data-pltdoc="x">register?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._offset~3f%29%29" class="RktValLink" data-pltdoc="x">offset?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._label~3f%29%29" class="RktValLink" data-pltdoc="x">label?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Loads the address of the given label into <span class="RktSym">dst</span>.</div></p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValLink" data-pltdoc="x">asm-interp</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">Global</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Lea%29%29" class="RktValLink" data-pltdoc="x">Lea</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rbx</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">done</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">42</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Jmp%29%29" class="RktValLink" data-pltdoc="x">Jmp</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rbx</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">done</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">42</span></p></td></tr></table></blockquote></blockquote></blockquote><h5>3.7<tt>&nbsp;</tt><a name="(part._.From_a86_to_x86)"></a><a name="(mod-path._a86/printer)"></a>From a86 to x86</h5><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._require%29%29" class="RktStxLink" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._a86%2Fprinter%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">a86/printer</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/langs" title="Install this package using `raco pkg install langs`"><span class="stt">langs</span></a></span></td></tr></table></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._a86/printer..rkt)._asm-string))"></a><span title="Provided from: a86/printer | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fprinter..rkt%29._asm-string%29%29" class="RktValDef RktValLink" data-pltdoc="x">asm-string</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">is</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">is</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._listof%29%29" class="RktValLink" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._instruction~3f%29%29" class="RktValLink" data-pltdoc="x">instruction?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Converts an a86 program to a string in nasm syntax. This is
useful in concert with Racket functions for IO in order to
write programs using concrete syntax that can be passed to
<span class="stt">nasm</span>.</div></p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fprinter..rkt%29._asm-string%29%29" class="RktValLink" data-pltdoc="x">asm-string</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">Global</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">42</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">"</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">default rel\n</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">section .text\n</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">global _entry\n_entry:\n</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">mov rax, 42\n</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">ret\n"</span></p></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/Writing.html#%28def._%28%28quote._~23~25kernel%29._display%29%29" class="RktValLink" data-pltdoc="x">display</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fprinter..rkt%29._asm-string%29%29" class="RktValLink" data-pltdoc="x">asm-string</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">Global</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">42</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">default rel</span></p></td></tr><tr><td><p><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">section .text</span></p></td></tr><tr><td><p><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">global _entry</span></p></td></tr><tr><td><p><span class="RktOut">_entry:</span></p></td></tr><tr><td><p><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">mov rax, 42</span></p></td></tr><tr><td><p><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">ret</span></p></td></tr></table></td></tr></table></blockquote></blockquote></blockquote><h5>3.8<tt>&nbsp;</tt><a name="(part._.An_.Interpreter_for_a86)"></a><a name="(mod-path._a86/interp)"></a>An Interpreter for a86</h5><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._require%29%29" class="RktStxLink" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._a86%2Finterp%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">a86/interp</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/langs" title="Install this package using `raco pkg install langs`"><span class="stt">langs</span></a></span></td></tr></table></p><p>As you&rsquo;ve seen throughout this chapter, <a href="#%28mod-path._a86%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">a86</span></a>
is equiped with an interpreter, which enables you to run
assembly programs from within Racket. This won&rsquo;t be directly
useful in building a compiler, but it will be very handy for
interactively exploring assembly programs and making examples
and test cases for your compiler.</p><p>The simplest form of interpreting an a86 program is to use
<span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValLink" data-pltdoc="x">asm-interp</a></span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._a86/interp..rkt)._asm-interp))"></a><span title="Provided from: a86/interp | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValDef RktValLink" data-pltdoc="x">asm-interp</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">is</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/number-types.html#%28def._%28%28quote._~23~25kernel%29._integer~3f%29%29" class="RktValLink" data-pltdoc="x">integer?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">is</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._listof%29%29" class="RktValLink" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._instruction~3f%29%29" class="RktValLink" data-pltdoc="x">instruction?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Assemble, link, and execute an a86 program.</div></p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValLink" data-pltdoc="x">asm-interp</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">Global</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">entry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">42</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">42</span></p></td></tr></table></blockquote></blockquote></blockquote><p>Programs do not have to start with <span class="RktVal">'</span><span class="RktVal">entry</span>. The
 interpreter will jump to whatever the first label in the
 program is:</p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValLink" data-pltdoc="x">asm-interp</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">Global</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">42</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">42</span></p></td></tr></table></blockquote></blockquote></blockquote><p>The argument of <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValLink" data-pltdoc="x">asm-interp</a></span> should be a complete,
 well-formed a86 program. For best results, always use
 <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span> to construct the program so that error
 checking is done early. If you use <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span> and
 <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValLink" data-pltdoc="x">asm-interp</a></span> and you get a NASM syntax error message,
 please report it to the course staff as this is a bug in the
 interpreter.</p><p>While we try to make syntax errors impossible, it is
 possible&#8212;<wbr></wbr>quite easy, in fact&#8212;<wbr></wbr>to write well-formed, but
 erroneous assembly programs. For example, this program tries
 to jump to null, which causes a segmentation fault:</p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValLink" data-pltdoc="x">asm-interp</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">Global</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">crash</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">crash</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Jmp%29%29" class="RktValLink" data-pltdoc="x">Jmp</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rax</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktErr">invalid memory reference.</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">Some debugging context lost</span></p></td></tr></table></blockquote></blockquote></blockquote><p>It is often the case that we want our assembly programs to
interact with the oustide or to use functionality
implemented in other programming languages. For that reason,
it is possible to link in object files to the running of an
a86 program.</p><p>The mechanism for controlling which objects should be linked
in is a parameter called <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._current-objs%29%29" class="RktValLink" data-pltdoc="x">current-objs</a></span>, which
contains a list of paths to object files which are linked to
the assembly code when it is interpreted.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>parameter</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._a86/interp..rkt)._current-objs))"></a><span title="Provided from: a86/interp | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._current-objs%29%29" class="RktValDef RktValLink" data-pltdoc="x">current-objs</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._listof%29%29" class="RktValLink" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/Manipulating_Paths.html#%28def._%28%28lib._racket%2Fprivate%2Fmisc..rkt%29._path-string~3f%29%29" class="RktValLink" data-pltdoc="x">path-string?</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="RktPn">(</span><span title="Provided from: a86/interp | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._current-objs%29%29" class="RktValDef RktValLink" data-pltdoc="x">current-objs</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">objs</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/void.html#%28def._%28%28quote._~23~25kernel%29._void~3f%29%29" class="RktValLink" data-pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">objs</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._listof%29%29" class="RktValLink" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/Manipulating_Paths.html#%28def._%28%28lib._racket%2Fprivate%2Fmisc..rkt%29._path-string~3f%29%29" class="RktValLink" data-pltdoc="x">path-string?</a></span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Parameter that controls object files that will be linked in to
assembly code when running <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValLink" data-pltdoc="x">asm-interp</a></span>.</div></p><p>For example, let&rsquo;s implement a GCD function in C:</p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><a href="code/a86/gcd.c"><span class="stt">a86/gcd.c</span></a></span></p><blockquote class="Rfilecontent"><p><div class="sourceCode" id="cb1"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> gcd(<span class="dt">int</span> n1, <span class="dt">int</span> n2) {</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (n2 == <span class="dv">0</span>) ? n1 : gcd(n2, n1 % n2);</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</p></blockquote></blockquote><p>First, compile the program to an object file:</p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">shell</span></span></p><blockquote class="Rfilecontent"><p><div class="sourceCode" id="cb1"><pre class="sourceCode fish"><code class="sourceCode fish"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="er">&gt;</span> gcc -fPIC -c gcd.c -o gcd.o</span></code></pre></div>
</p></blockquote></blockquote><p>The option <span class="stt">-fPIC</span> is important; it causes the C compiler
to emit &ldquo;position independent code,&rdquo; which is what enables
Racket to dynamically load and run the code.</p><p>Once the object file exists, using the <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._current-objs%29%29" class="RktValLink" data-pltdoc="x">current-objs</a></span>
parameter, we can run code that uses things defined in the C
code:</p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/parameters.html#%28form._%28%28lib._racket%2Fprivate%2Fmore-scheme..rkt%29._parameterize%29%29" class="RktStxLink" data-pltdoc="x">parameterize</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._current-objs%29%29" class="RktValLink" data-pltdoc="x">current-objs</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">"gcd.o"</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValLink" data-pltdoc="x">asm-interp</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Extern%29%29" class="RktValLink" data-pltdoc="x">Extern</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">gcd</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">Global</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rdi</span><span class="hspace">&nbsp;</span><span class="RktVal">11571</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rsi</span><span class="hspace">&nbsp;</span><span class="RktVal">1767</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Sub%29%29" class="RktValLink" data-pltdoc="x">Sub</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rsp</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Call%29%29" class="RktValLink" data-pltdoc="x">Call</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">gcd</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Add%29%29" class="RktValLink" data-pltdoc="x">Add</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rsp</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">57</span></p></td></tr></table></blockquote></blockquote></blockquote><p>This will be particularly relevant for writing a compiler
where emitted code will make use of functionality defined in
a runtime system.</p><p>Note that if you forget to set <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._current-objs%29%29" class="RktValLink" data-pltdoc="x">current-objs</a></span>, you will get a
linking error saying a symbol is undefined:</p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">Examples</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValLink" data-pltdoc="x">asm-interp</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._prog%29%29" class="RktValLink" data-pltdoc="x">prog</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Extern%29%29" class="RktValLink" data-pltdoc="x">Extern</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">gcd</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">Global</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Label%29%29" class="RktValLink" data-pltdoc="x">Label</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rdi</span><span class="hspace">&nbsp;</span><span class="RktVal">11571</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Mov%29%29" class="RktValLink" data-pltdoc="x">Mov</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rsi</span><span class="hspace">&nbsp;</span><span class="RktVal">1767</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Sub%29%29" class="RktValLink" data-pltdoc="x">Sub</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rsp</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Call%29%29" class="RktValLink" data-pltdoc="x">Call</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">gcd</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Add%29%29" class="RktValLink" data-pltdoc="x">Add</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rsp</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._.Ret%29%29" class="RktValLink" data-pltdoc="x">Ret</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktErr">link error: symbol _gcd not defined in linked objects: ()</span></p></td></tr><tr><td><p><span class="RktErr">use `current-objs` to link in object containing symbol</span></p></td></tr><tr><td><p><span class="RktErr">definition.</span></p></td></tr></table></blockquote></blockquote></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._a86/interp..rkt)._asm-interp/io))"></a><span title="Provided from: a86/interp | Package: langs"><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%2Fio%29%29" class="RktValDef RktValLink" data-pltdoc="x">asm-interp/io</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">is</span><span class="hspace">&nbsp;</span><span class="RktVar">in</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._cons%29%29" class="RktValLink" data-pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/number-types.html#%28def._%28%28quote._~23~25kernel%29._integer~3f%29%29" class="RktValLink" data-pltdoc="x">integer?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">is</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fbase..rkt%29._listof%29%29" class="RktValLink" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._a86%2Fast..rkt%29._instruction~3f%29%29" class="RktValLink" data-pltdoc="x">instruction?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">in</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym"><a href="#%28def._%28%28lib._a86%2Finterp..rkt%29._asm-interp%29%29" class="RktValLink" data-pltdoc="x">asm-interp</a></span>, but uses <span class="RktVar">in</span> for input and produce the result along
with any output as a string.</div></p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="OCaml_to_Racket.html" title="backward to &quot;2 From OCaml to Racket&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Notes.html" title="up to &quot;Notes&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Abscond.html" title="forward to &quot;4 Abscond: a language of numbers&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>